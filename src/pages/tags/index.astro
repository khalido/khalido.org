---
import BaseLayout from "../../layouts/BaseLayout.astro";
import BaseHead from "../../components/BaseHead.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import TagCloud from "../components/TagCloud.astro";
import ContentList from "../components/ContentList.astro";

const posts = (await getCollection("blog"))
  .sort((a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf())
  .reverse();

const tags = [...new Set(posts.map((post) => post.data.tags).flat())].sort();
const allTags = [
  ...new Set([...posts, ...asides].map((content) => content.data.tags).flat()),
].sort();
---

<BaseLayout>
  <TagCloud tags={allTags} />

  <input
    class="px-4 py-3 w-80 text-xl"
    type="text"
    id="postSearch"
    placeholder="Search"
  />

  <ContentList contents={allContent} />
</BaseLayout>
